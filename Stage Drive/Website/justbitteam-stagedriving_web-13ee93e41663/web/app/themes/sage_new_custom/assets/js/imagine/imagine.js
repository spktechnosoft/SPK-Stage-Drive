(function(){!function(e,t,i){"use strict";var n;return n={animation:"y",animate:"TweenLite",optimize:!0,initialAnimationDuration:1,orientation:"vertical",factor:.5,screen:{xs:0,sm:768,md:992,lg:1200,xl:1560},perspective:800,perspectiveOrigin:"50% 50%",preload:!0,preloader:'<div class="imagine-loader"><div class="imagine-loader-inner"></div></div>',normalizeTop:!0,overflow:!1,anchor:"center",size:"auto",scroller:e(t),selector:{layer:".imagine-layer",background:".imagine-background"}},e.imagine=function(s,a){this._defaults=n,this.settings=e.extend(!0,{},this._defaults,a),this.element=e(s),this.layers=e(this.settings.selector.layer,this.element),this.background=e(this.settings.selector.background,this.element),this.source=this.settings.source?this.settings.source:this.element,this.parent=this.settings.parent?this.settings.parent:this.element.parent(),this.window=this.settings.scroller,this.background.length>0&&!this.settings.animateElement?this.settings.animateElement=!1:this.settings.animateElement=!0,this.debug=!1,this.size={window:{},source:{},parent:{},element:{},background:{},layer:[]},this.position={window:{},source:{},element:{},parent:{}},this.loaded=!1,this.initialize=function(e){return function(){e.set_element_id(),e.set_animator(),e.set_orientation(e.settings.orientation),e.set_layer_index(),e.init_animus(),e.set_data(),e.set_classes(),e.load(function(){e.set_size(),e.set_position(),e.set_responsive_context(),e.bind_resize(),e.bind_scroll(),e.scroll(),e.loaded=!0,e.element.triggerHandler("imagine.load",[e.element]),e.log("Imagine has been initialized.")})}}(this),this.parallax=function(t){return function(){var i,n,s,a,o,r,l;i=t.position.window[t.param.middle]-t.position.source[t.param.middle],o=(t.position.window[t.param.end]-t.position.source[t.param.start])/t.size.source.spanning,s=i/t.size.source.spanning,t.position.source.beginning&&(n=t.size.window[t.param.half]-t.position.source[t.param.middle],r=n/t.size.source.spanning,i-=n,o-=r,s-=r),l=i<=0,a=i>=0,t.loaded||(l=!1,a=!1,t.in_view||(i=0,o=0,s=0)),e.each(t.animation,function(n,r){var h,d,c;h={},c=r[0],d=r[1][t.current_responsive_size],e.each(d.state,function(e,n){var r,c,g,m,p,u,f,w,z,_,b,v;if("*"===d.state[e][0]){if(f=d.state[e][3],u="to-middle"===f||"from-middle"===f?2:1,v=Math.abs(n[1])+Math.abs(n[2]),"to-middle"===f&&a)return;return void("from-middle"===f?l?h[e]=n[1]:h[e]=n[1]-v*(o-.5)*u:(b=v*o*u,n[1]>n[2]?h[e]=n[1]-b:h[e]=n[1]+b))}if(w=d.state[e][0],f=d.state[e][1],g=i*w,_=o*w,m=s*w,!("to-middle"===f&&a||"from-middle"===f&&l)||"opacity"===e)switch(e){case"opacity":"from-middle"===f?(h[e]=1-2*m,h[e]>1&&(h[e]=1)):"to-middle"===f?(h[e]=1+2*m,h[e]>1&&(h[e]=1)):h[e]=1-Math.abs(2*m);break;case"scale":case"scaleX":case"scaleY":case"scaleZ":"up"===f?h[e]=1+_:"down"===f?h[e]=1+.5*w-_:h[e]=1+m;break;case"rotation":case"rotationX":case"rotationY":case"rotationZ":h[e]=180*(o-.5)*w;break;case"skewX":case"skewY":case"skewZ":h[e]=180*(o-.5)*w;break;case"x":case"y":case"xPercent":case"yPercent":t.background.length>0?!t.settings.overflow&&t.size.source.same[t.param.size]&&e===t.param.axis?(z={},z[t.param.start]=(t.position.window[t.param.start]-t.position.source[t.param.start])/t.size.source[t.param.size],z[t.param.end]=(t.position.window[t.param.end]-t.position.source[t.param.end])/t.size.source[t.param.size],z.value=0,z[t.param.start]<0?z[t.param.start]=0:z.value=z[t.param.start],z[t.param.end]>0?z[t.param.end]=0:z.value=z[t.param.end],h[e]=z.value*t.size.source[t.param.size]*w):(p=t.size.source.difference*(1+w),r=t.position.element[t.param.start]-g-p,c=r+t.size.element[t.param.size],r>t.position.source[t.param.start]&&c<t.position.source[t.param.end]||(h[e]=g)):h[e]=g;break;default:h[e]=g}}),h.onComplete=t.stop_ticking,t.loaded?t.animate.set(c,h):t.animate.to(c,t.settings.initialAnimationDuration,h)}),t.element.triggerHandler("imagine.parallax",[o,i,s])}}(this),this.load=function(t){return function(i){var n,s,a,o;s=t.background.add(t.layers.filter("img")),s.length>0?(a=0,t.settings.preloader&&(o=e(t.settings.preloader),t.background.before(o)),n=function(){a+=1,a===s.length&&(t.settings.preloader&&t.animate.to(o,1,{scale:2,opacity:0,onComplete:function(){o.remove()}}),i.call())},s.each(function(i,s){var a,o,r;a=e(s),r=null!=a.attr("data-imagine-src")?a.attr("data-imagine-src"):a.attr("src"),o=e("<img>"),o.attr("src",r),o.on("load",function(){a.attr("src",r),n()}).on("error",function(){t.error('Image with src="'+r+'" failed to load.'),n()})})):i.call()}}(this),this.init_animus=function(t){return function(){var i;i={duration:t.settings.animation.duration,easing:t.settings.animation.easing},t.animus=new e.animus(i),t.log("Initialized animus parser.")}}(this),this.set_data=function(t){return function(){t.animation=[],t.settings.animateElement&&t.animation.push([t.element,t.get_animation_data("element",t.element)]),t.background.length>0&&(t.animation.push([t.background,t.get_animation_data("background",t.background)]),t.size.background=t.get_size_data("background",t.background)),t.layers.length>0&&(t.animation.layer=[],t.layers.each(function(i,n){n=e(n),t.animation.push([n,t.get_animation_data("layer",n,i)]),t.size.layer.push(t.get_size_data("layer",n,i))})),t.log("Imagine data has been processed."),t.log(t.animation)}}(this),this.get_animation_data=function(t){return function(i,n,s){var a,o,r,l,h;return a={},o="",r=null,h=null!=n.attr("id")?"#"+n.attr("id"):"",l=null!=n.attr("class")?n.attr("class").split(" ").map(function(e){return"."+e}):[],null!=n.attr("data-imagine")?o=n.attr("data-imagine"):"string"==typeof t.settings.animation?o=t.settings.animation:"object"==typeof t.settings.animation&&("string"==typeof t.settings.animation[i]?o=t.settings.animation[i]:e.isArray(t.settings.animation[i])?"string"==typeof t.settings.animation[i][s]?o=t.settings.animation[i][s]:"object"==typeof t.settings.animation[i][s]&&(r=t.settings.animation[i][s],"string"==typeof t.settings.animation[i][s]["*"]&&(o=t.settings.animation[i]["*"])):"object"==typeof t.settings.animation[i]?(r=t.settings.animation[i],"string"==typeof t.settings.animation[i]["*"]?o=t.settings.animation[i]["*"]:"string"==typeof t.settings.animation[i][h]?o=t.settings.animation[i][h]:"object"==typeof t.settings.animation[i][h]?r=t.settings.animation[i][h]:e.each(l,function(e,n){"string"==typeof t.settings.animation[i][n]&&(o=t.settings.animation[i][n]),"object"==typeof t.settings.animation[i][n]&&(r=t.settings.animation[i][n])})):o="string"==typeof t.settings.animation["*"]?t.settings.animation["*"]:""),e.each(Object.keys(t.settings.screen),function(e,i){var n,s,l,h,d;a[i]={},s={},s=r&&"string"==typeof r[i]?r[i]:o,a[i]=t.animus.get(s),n=a[i].state;for(h in n)d=n[h],d=""+d,d.indexOf("..")===-1?(l=d.split(/\s+/),0===l.length?l.push(t.settings.factor):1===l.length&&(""===l[0]&&(l[1]="default",l[0]=t.settings.factor),isNaN(l[0])?(l[1]=l[0],l[0]=t.settings.factor):(l[1]="default",l[0]=parseFloat(l[0]))),a[i].state[h]=l):(l=["*"],d=d.split(/[\. ]+/),l[1]=parseFloat(d[0]),l[2]=parseFloat(d[1]),2===d.length?l[3]="default":l[3]=d[2],a[i].state[h]=l)}),a}}(this),this.get_size_data=function(t){return function(i,n,s){var a,o,r,l;return a={},r=null!=n.attr("id")?"#"+n.attr("id"):"",o=null!=n.attr("class")?n.attr("class").split(" ").map(function(e){return"."+e}):[],l=!1,null!=t.settings.canvas&&null!=t.settings.canvas[i]&&(null!=s?null!=t.settings.canvas[i][s]?l=t.settings.canvas[i][s]:null!=t.settings.canvas[i][id]?l=t.settings.canvas[i][id]:e.each(o,function(e,n){null!=t.settings.canvas[i][n]&&(l=t.settings.canvas[i][n])}):l=t.settings.canvas[i]),null!=n.attr("data-imagine-width")?a.width=parseFloat(n.attr("data-imagine-width")):l&&null!=l.width&&(a.width=parseFloat(t.delete_property(l,"width"))),null!=n.attr("data-imagine-height")?a.height=parseFloat(n.attr("data-imagine-height")):l&&null!=l.height&&(a.height=parseFloat(t.delete_property(l,"height"))),"layer"===i&&(a.position={},null!=n.attr("data-imagine-top")?a.position.top=parseFloat(n.attr("data-imagine-top")):l&&null!=l.top?a.position.top=parseFloat(t.delete_property(l,"top")):null!=n.attr("data-imagine-bottom")?a.position.bottom=parseFloat(n.attr("data-imagine-bottom")):l&&null!=l.bottom?a.position.bottom=parseFloat(t.delete_property(l,"bottom")):a.position.top=0,null!=n.attr("data-imagine-left")?a.position.left=parseFloat(n.attr("data-imagine-left")):l&&null!=l.left?a.position.left=parseFloat(t.delete_property(l,"left")):null!=n.attr("data-imagine-right")?a.position.right=parseFloat(n.attr("data-imagine-right")):l&&null!=l.right?a.position.right=parseFloat(t.delete_property(l,"right")):a.position.left=0),a}}(this),this.set_size=function(t){return function(){t.size.window.width=t.window.width(),t.size.window.height=t.window.height(),t.size.window.halfWidth=t.size.window.width/2,t.size.window.halfHeight=t.size.window.height/2,t.size.parent.width=t.parent.outerWidth(!0),t.size.parent.height=t.parent.outerHeight(!0),"fullscreen"===t.settings.size?t.source.css({width:t.size.window.width,height:t.size.window.height,"max-width":t.size.window.width,"max-height":t.size.window.height}):"screenHeight"===t.settings.size?t.source.height(t.size.window.height):"screenWidth"===t.settings.size&&t.source.width(t.size.window.width),t.size.source.width=t.source.outerWidth(!0),t.size.source.height=t.source.outerHeight(!0),t.background.length>0?(t.size.background=e.extend(t.get_image_size(t.background),t.size.background),t.size.element.width=t.size.source.width,t.size.element.height=t.size.source.width/t.size.background.width*t.size.background.height,t.size.source.height>t.size.element.height&&(t.size.element.width=t.size.source.height/t.size.background.height*t.size.background.width,t.size.element.height=t.size.source.height),t.loaded?t.animate.set(t.background,{height:t.size.element.height,width:t.size.element.width}):t.animate.to(t.background,t.settings.initialAnimationDuration,{height:t.size.element.height,width:t.size.element.width})):(t.size.element.width=t.element.outerWidth(!0),t.size.element.height=t.element.outerHeight(!0)),t.layers.length>0&&t.layers.each(function(i,n){t.size.layer[i]=e.extend(t.get_image_size(e(n)),t.size.layer[i])}),t.size.source.same={width:t.size.source.width===t.size.element.width,height:t.size.source.height===t.size.element.height},t.size.source.ratio=t.size.window[t.param.size]/t.size.source[t.param.size],t.size.source.difference=t.size.window[t.param.size]-t.size.source[t.param.size],t.size.source.spanning=t.size.window[t.param.size]+t.size.source[t.param.size],t.log("Element sizes have been set.")}}(this),this.setSize=this.set_size,this.set_position=function(e){return function(){e.position.source.top=e.source.offset().top,e.position.source.bottom=e.position.source.top+e.size.source.height,e.position.source.vmiddle=(e.position.source.top+e.position.source.bottom)/2,e.position.source.left=e.source.offset().left,e.position.source.right=e.position.source.left+e.size.source.width,e.position.source.hmiddle=(e.position.source.left+e.position.source.right)/2,e.position.element.top=e.element.offset().top,e.position.element.bottom=e.position.element.top+e.size.element.height,e.position.element.left=e.element.offset().left,e.position.element.right=e.position.element.left+e.size.element.width,e.background.length>0&&(e.position.background=e.position.element),e.position.parent.top=e.parent.offset().top,e.position.parent.bottom=e.position.parent.top+e.size.parent.height,e.position.parent.left=e.parent.offset().left,e.position.parent.right=e.position.parent.left+e.size.parent.width,e.settings.normalizeTop&&e.position.source[e.param.start]<e.size.window[e.param.size]/2&&e.size.source[e.param.size]<e.size.window[e.param.size]?e.position.source.beginning=!0:e.position.source.beginning=!1,(e.background.length>0||e.layers.length>0)&&e.set_canvas_position(),e.log("Element positions have been set.")}}(this),this.setPosition=this.set_position,this.set_canvas_position=function(t){return function(){var i,n,s,a;switch(t.settings.anchor){case"center":n=-(t.size.element.width-t.size.source.width)/2,s=-(t.size.element.height-t.size.source.height)/2;break;case"top":n=-(t.size.element.width-t.size.source.width)/2,s=0;break;case"bottom":n=-(t.size.element.width-t.size.source.width)/2,s=-(t.size.element.height-t.size.source.height);break;case"left":n=0,s=-(t.size.element.height-t.size.source.height);break;case"right":n=-(t.size.element.width-t.size.source.width),s=-(t.size.element.height-t.size.source.height)/2;break;case"top-left":n=0,s=0;break;case"bottom-left":n=0,s=-(t.size.element.height-t.size.source.height);break;case"top-right":n=-(t.size.element.width-t.size.source.width),s=0;break;case"bottom-right":n=-(t.size.element.width-t.size.source.width),s=-(t.size.element.height-t.size.source.height)}n>0&&(n=0),s>0&&(s=0),t.loaded?t.animate.set(t.background,{"margin-top":s,"margin-left":n}):t.animate.to(t.background,t.settings.initialAnimationDuration,{"margin-top":s,"margin-left":n}),a=t.size.element.width/t.size.background.width,i=t.size.element.height/t.size.background.height,t.layers.each(function(o,r){var l;r=e(r),l={},"top"in t.size.layer[o].position?l.top=i*t.size.layer[o].position.top+s:"bottom"in t.size.layer[o].position&&(l.bottom=i*t.size.layer[o].position.bottom+s),"left"in t.size.layer[o].position?l.left=a*t.size.layer[o].position.left+n:"right"in t.size.layer[o].position&&(l.right=a*t.size.layer[o].position.right+n),"width"in t.size.layer[o]&&(l.width=a*t.size.layer[o].width),"height"in t.size.layer[o]&&(l.height=i*t.size.layer[o].height),t.loaded?t.animate.set(r,l):t.animate.to(r,t.settings.initialAnimationDuration,l)})}}(this),this.set_layer_index=function(t){return function(){t.layers.each(function(i,n){e(n).css({"z-index":t.layers.length-i})})}}(this),this.set_orientation=function(e){return function(t){e.param={},"vertical"===t?(e.param.size="height",e.param.middle="vmiddle",e.param.start="top",e.param.end="bottom",e.param.axis="y",e.param.scroll="scrollTop",e.param.half="halfHeight"):(e.param.size="width",e.param.middle="hmiddle",e.param.start="left",e.param.end="right",e.param.axis="x",e.param.scroll="scrollLeft",e.param.half="halfWidth")}}(this),this.setOrientation=this.set_orientation,this.set_responsive_context=function(e){return function(){e.window_width>=e.settings.screen.xl?e.current_responsive_size="xl":e.window_width>=e.settings.screen.lg?e.current_responsive_size="lg":e.window_width>=e.settings.screen.md?e.current_responsive_size="md":e.window_width>=e.settings.screen.sm?e.current_responsive_size="sm":e.current_responsive_size="xs",e.log("Responsive context is "+e.current_responsive_size+".")}}(this),this.set_classes=function(t){return function(){var n,s;0===e("#imagine-style").length&&(n=".imagine-parent { perspective: "+t.settings.perspective+"px; -moz-perspective: "+t.settings.perspective+"px; -webkit-perspective: "+t.settings.perspective+"px; perspective-origin: "+t.settings.perspectiveOrigin+"; -moz-perspective-origin: "+t.settings.perspectiveOrigin+"; -webkit-perspective-origin: "+t.settings.perspectiveOrigin+"; backface-visibility: hidden; -moz-backface-visibility: hidden; -webkit-backface-visibility: hidden; }",s=i.createElement("style"),s.id="imagine-style",s.type="text/css",s.innerHTML=n,e("head")[0].appendChild(s)),t.settings.animateElement?t.parent.addClass("imagine-parent"):t.element.addClass("imagine-parent"),t.background.length>0&&t.element.addClass("imagine-canvas"),t.element.addClass("imagine-animated"),t.background.addClass("imagine-animated"),t.layers.addClass("imagine-animated")}}(this),this.bind_resize=function(e){return function(){e.window.resize(function(){e.set_size(),e.set_position(),e.set_responsive_context(),e.parallax()})}}(this),this.ticking=!1,this.stop_ticking=function(e){return function(){e.ticking=!1}}(this),this.settings.optimize?this.start_ticking=function(e){return function(){e.ticking=!0}}(this):this.start_ticking=function(e){return function(){e.ticking=!1}}(this),this.in_view_eariler=!1,this.scroll=function(e){return function(){var t,i;if(e.position.window[e.param.start]=e.window[e.param.scroll](),e.position.window[e.param.end]=e.position.window[e.param.start]+e.size.window[e.param.size],e.position.window[e.param.middle]=e.position.window[e.param.start]+e.size.window[e.param.half],i=e.element[0]._gsTransform&&e.element[0]._gsTransform[e.param.axis]?e.element[0]._gsTransform[e.param.axis]:0,t=e.position.window[e.param.half]-i,e.in_view=!(e.position.window[e.param.end]-e.position.source[e.param.start]+t<0||e.position.window[e.param.start]-e.position.source[e.param.end]-t>0),e.in_view)e.in_view_eariler||(e.in_view_eariler=!0,e.element.addClass("imagine-visible"),e.element.removeClass("imagine-hidden"),e.element.triggerHandler("imagine.visible",[e.in_view]));else if(e.in_view_eariler&&(e.in_view_eariler=!1,e.element.removeClass("imagine-visible"),e.element.addClass("imagine-hidden"),e.element.triggerHandler("imagine.visible",[e.in_view])),e.loaded)return;e.ticking||(e.start_ticking(),e.parallax())}}(this),this.bind_scroll=function(e){return function(){e.window.on("scroll",e.scroll)}}(this),this.set_element_id=function(e){return function(){null!=e.element.attr("id")?e.id=e.element.attr("id"):(e.id=e.get_random_id("imagine"),e.element.attr("id",e.id)),e.log("Element id has been set to "+e.id+".")}}(this),this.set_animator=function(e){return function(){e.animate=t[e.settings.animate],e.log("Animating using the "+e.settings.animate+" platform.")}}(this),this.get_random_id=function(e){return e+"-"+Math.floor(1e5*Math.random()+1)},this.get_image_size=function(e){return function(e){var t;return t={},t.width=null!=e[0].naturalWidth?e[0].naturalWidth:null!=e[0].width?e[0].width:null!=e.width?e.width():"auto",t.height=null!=e[0].naturalHeight?e[0].naturalHeight:null!=e[0].height?e[0].height:null!=e.height?e.height():"auto",t}}(this),this.debounce=function(e,t,i){var n;return n=void 0,function(){var s,a,o,r;o=this,s=arguments,r=function(){n=null,i||e.apply(o,s)},a=i&&!n,clearTimeout(n),n=setTimeout(r,t),a&&e.apply(o,s)}},this.delete_property=function(e,t){var i;return i=e[t],delete e[t],i},this.extend_settings=function(t){return function(i,n){return null!=t.settings[i]?t.settings[i]=e.extend({},n,t.settings[i]):t.settings[i]=n}}(this),this.log=function(e){return function(t){e.debug&&("object"==typeof t?console.log("[Imagine "+e.id+"]",t):console.log("[Imagine "+e.id+"] "+t))}}(this),this.error=function(e){return function(t){"object"==typeof t?console.error("[Imagine "+e.id+"]",t):console.error("[Imagine "+e.id+"] "+t)}}(this),this.initialize()},e.fn.imagine=function(t){return this.each(function(i,n){if(!e.data(n,"imagine"))return e.data(n,"imagine",new e.imagine(n,t))})}}(window.jQuery,window,document)}).call(this);
